<h2 style="text-align:center; margin-bottom:24px;">Top 6 Recommended Listings for "{{ tag }}"</h2>

<!-- 상단 2단: 왼쪽(해시태그 버튼), 오른쪽(지도) -->
<div style="display: flex; justify-content: center; align-items: flex-start; gap: 32px; margin: 20px auto 32px auto; width: 90%;">
    <!-- 왼쪽: 해시태그 버튼 -->
    <div style="flex: 0 0 320px; background: #fafbfc; border-radius: 12px; box-shadow:0 1px 6px #0001; padding: 18px 18px 12px 18px; text-align:center; min-width:220px;">
        <div style="font-weight:600; margin-bottom:10px; font-size:1.05em;">다시 해시태그 선택</div>
        <form method="post" action="/">
            <div style="display:flex; flex-wrap:wrap; gap:10px; justify-content:center;">
                {% set hashtags = [
                    'Modern',
                    'Nordic',
                    'Natural',
                    'Vintage Retro',
                    'Lovely Romantic',
                    'Industrial',
                    'Unique',
                    'French Provence',
                    'Minimal Simple',
                    'Classic Antique',
                    'Korean Asian'
                ] %}
                {% for htag in hashtags %}
                    <a href="{{ url_for('recommend') }}?selected_tag={{ htag }}" style="background:#e3f2fd; color:#00796b; border:none; border-radius:12px; padding:7px 16px; font-size:0.97em; font-weight:500; cursor:pointer; text-decoration:none; display:inline-block; margin-bottom:5px;">{{ htag }}</a>
                {% endfor %}
            </div>
        </form>
    </div>
    <!-- 오른쪽: 지도 -->
    <div style="flex: 1 1 400px; min-width:320px; max-width:600px;">
        <iframe src="{{ url_for('static', filename='map.html') }}" width="100%" height="400px" style="border:none; border-radius:10px;"></iframe>
    </div>
</div>

<!-- 추천 숙소 카드 -->
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 28px; padding: 18px;">
  {% for item in recommendations %}
    <div style="border: 1.5px solid #e0e0e0; padding: 18px 18px 10px 18px; border-radius: 16px; background: #fff; box-shadow:0 2px 8px #0001; display:flex; flex-direction:column; min-height:420px;">
      <a href="{{ item.listing_url }}" target="_blank">
        <img src="{{ item.picture_url }}" width="100%" style="border-radius: 10px; aspect-ratio: 4/3; object-fit:cover;">
      </a>
      <div style="margin-top:14px; flex:1; display:flex; flex-direction:column;">
        <div style="font-weight:900; font-size:1.18em; color:#222; margin-bottom:7px; line-height:1.2;">{{ item.name }}</div>
        <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
          <span style="color:#FFD600; font-size:1.08em;">★</span>
          <span style="color:#222; font-size:1em; font-weight:500;">{{ item.review_scores_rating }}</span>
          <span style="color:#888; font-size:0.98em;">({{ item.number_of_reviews }})</span>
          <span style="color:#2ecc71; font-weight:700; margin-left:auto; font-size:1.08em;">{{ item.price }}</span>
        </div>
        <div style="margin-top:2px; display:flex; gap:7px; flex-wrap:wrap;">
          {% if item.tag1 and item.tag1['tag'] %}<span style="background:#e0f7fa; color:#00796b; border-radius:12px; padding:4px 13px; font-size:0.97em; font-weight:500;">{{ item.tag1['tag'] }}</span>{% endif %}
          {% if item.tag7 and item.tag7['tag'] %}<span style="background:#ffe0b2; color:#e65100; border-radius:12px; padding:4px 13px; font-size:0.97em; font-weight:500;">{{ item.tag7['tag'] }}</span>{% endif %}
          {% if item.tag8 and item.tag8['tag'] %}<span style="background:#f8bbd0; color:#ad1457; border-radius:12px; padding:4px 13px; font-size:0.97em; font-weight:500;">{{ item.tag8['tag'] }}</span>{% endif %}
        </div>
        <div style="display:flex; justify-content:flex-end; align-items:end; margin-top:auto;">
          <a href="{{ item.listing_url }}" target="_blank" style="color:#1976d2; font-size:0.91em; text-decoration:underline; font-weight:400; background:none; padding:0; border-radius:0; margin-top:18px;">자세히 보기</a>
        </div>
      </div>
    </div>
  {% endfor %}
</div>

